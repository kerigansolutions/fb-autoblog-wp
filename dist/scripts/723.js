"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[723],{744:function(e,n){n.Z=(e,n)=>{const s=e.__vccOpts||e;for(const[e,t]of n)s[e]=t;return s}},723:function(e,n,s){s.r(n),s.d(n,{default:function(){return l}});var t=s(821),o={key:0,class:"text-gray-400 text uppercase font-bold mb-2"},r=["onClick"],a={class:"text-primary px-4"},i={class:"text-sm text-gray-800"},c=(0,t._)("button",{class:"px-3 py-1 ml-auto leading-none h-8 border-2 uppercase rounded text-primary border-primary group-hover:bg-primary group-hover:text-white group-hover:border-transparent"},"select",-1),u={class:"flex"};var p={name:"FacebookAuth",data:function(){return{accessToken:void 0,data_access_expiration_time:void 0,expiresIn:void 0,graphDomain:void 0,signedRequest:void 0,userID:void 0,status:void 0,longLivedToken:void 0,businesses:[]}},methods:{selectBusiness:function(e){var n=this;document.getElementById("fbcompanyid").value=e.id,fetch("/wp-json/kerigansolutions/v1/autoblogtoken?token="+e.access_token,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),n.longLivedToken=e.access_token,document.getElementById("facebooktoken").value=e.access_token})),this.businesses=[]},authorize:function(){var e=this;FB.login((function(n){e.accessToken=n.authResponse.accessToken,e.data_access_expiration_time=n.authResponse.data_access_expiration_time,e.expiresIn=n.authResponse.expiresIn,e.graphDomain=n.authResponse.graphDomain,e.signedRequest=n.authResponse.signedRequest,e.userID=n.authResponse.userID,e.status=n.status,FB.api("/"+e.userID+"/accounts",(function(n){console.log(n),e.businesses=n.data}))}),{scope:"pages_show_list, pages_read_engagement, pages_read_user_content, public_profile, business_management"})}}};const d=(0,s(744).Z)(p,[["render",function(e,n,s,p,d,l){return(0,t.wg)(),(0,t.iD)("div",null,[d.businesses.length>0?((0,t.wg)(),(0,t.iD)("p",o,"Select a Facebook Business Page To Sync:")):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.businesses,(function(e){return(0,t.wg)(),(0,t.iD)("div",{key:e.index,class:"p-2 bg-gray-200 rounded flex items-center mb-1 border border-gray-300 group group-hover:bg-accent cursor-pointer",onClick:(0,t.iM)((function(n){return l.selectBusiness(e)}),["prevent"])},[(0,t._)("strong",a,(0,t.zw)(e.name),1),(0,t._)("span",i,(0,t.zw)(e.id),1),c],8,r)})),128)),(0,t._)("div",u,[(0,t._)("button",{onClick:n[0]||(n[0]=(0,t.iM)((function(){return l.authorize&&l.authorize.apply(l,arguments)}),["prevent"])),class:"form-button bg-accent hover:bg-white border-2 border-transparent hover:border-accent text-primary rounded"},[(0,t.WI)(e.$slots,"default")])])])}]]);var l=d}}]);
//# sourceMappingURL=723.js.map